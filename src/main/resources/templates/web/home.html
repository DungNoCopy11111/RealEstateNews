<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">
<body>
<main th:fragment="content">
    <!-- Thêm vào đầu content -->
    <div th:if="${error}" class="alert alert-danger" role="alert">
        <span th:text="${error}"></span>
    </div>
    <div class="main">
        <div class="re_main">
            <!-- Search -->
            <div class="search_area">
                <div class="search_bar">
                    <form th:action="@{/property/search}" method="POST" th:object="${searchForm}">
                        <div class="re_search_bar">
                            <ul class="search_kind">
                                <li id="true_nha_dat_ban" class="search_true active" data-type="sell">Nhà đất bán</li>
                                <li id="true_nha_dat_thue" class="search_true" data-type="rent">Nhà đất cho thuê</li>
                            </ul>
                        </div>
                        <input type="hidden" th:field="*{city}" id="city">
                        <input type="hidden" th:field="*{propertyType}" id="propertyType">
                        <input type="hidden" th:field="*{minPrice}" id="minPrice">
                        <input type="hidden" th:field="*{maxPrice}" id="maxPrice">
                        <input type="hidden" th:field="*{minArea}" id="minArea">
                        <input type="hidden" th:field="*{maxArea}" id="maxArea">
                        <div class="search_attribute">
                            <div class="input-box">
                                <i id="true_province" class="uil uil-search"></i>
                                <input id="true_province_" class="input_en" type="text" placeholder="Chọn tỉnh thành"/>
                                <button type="submit" id="button_search" class="button_search">Search</button>
                            </div>
                            <div class="show_all_">
                                <div class="show_all active" id="menu">
                                    <div class="_first">
                                        <div class="header_show">
                                            <div class="left">
                                                Bạn muốn tìm bất động sản ở tỉnh nào?
                                            </div>
                                            <svg id="close-menu" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-x-lg" viewBox="0 0 16 16">
                                                <path d="M2.146 2.854a.5.5 0 1 1 .708-.708L8 7.293l5.146-5.147a.5.5 0 0 1 .708.708L8.707 8l5.147 5.146a.5.5 0 0 1-.708.708L8 8.707l-5.146 5.147a.5.5 0 0 1-.708-.708L7.293 8z"/>
                                            </svg>
                                        </div>
                                    </div>
                                    <hr class="show_hr">
                                    <div class="_second">
                                        <div class="content_show">
                                            <div class="grid-container">
                                                <div class="grid-item" data-value="ANGIANG" onclick="selectValue(this)">An Giang</div>
                                                <div class="grid-item" data-value="BRVT" onclick="selectValue(this)">BR Vũng Tàu</div>
                                                <div class="grid-item" data-value="BACLIEU" onclick="selectValue(this)">Bạc Liêu</div>
                                                <div class="grid-item" data-value="BACKAN" onclick="selectValue(this)">Bắc Kạn</div>
                                                <div class="grid-item" data-value="BACGIANG" onclick="selectValue(this)">Bắc Giang</div>
                                                <div class="grid-item" data-value="BACNINH" onclick="selectValue(this)">Bắc Ninh</div>
                                                <div class="grid-item" data-value="BENTRE" onclick="selectValue(this)">Bến Tre</div>
                                                <div class="grid-item" data-value="BINHDUONG" onclick="selectValue(this)">Bình Dương</div>
                                                <div class="grid-item" data-value="BINHDINH" onclick="selectValue(this)">Bình Định</div>
                                                <div class="grid-item" data-value="BINHPHUOC" onclick="selectValue(this)">Bình Phước</div>
                                                <div class="grid-item" data-value="BINHTHUAN" onclick="selectValue(this)">Bình Thuận</div>
                                                <div class="grid-item" data-value="CAMAU" onclick="selectValue(this)">Cà Mau</div>
                                                <div class="grid-item" data-value="CAOBANG" onclick="selectValue(this)">Cao Bằng</div>
                                                <div class="grid-item" data-value="CANTHO" onclick="selectValue(this)">Cần Thơ</div>
                                                <div class="grid-item" data-value="DANANG" onclick="selectValue(this)">Đà Nẵng</div>
                                                <div class="grid-item" data-value="DAKLAK" onclick="selectValue(this)">Đắk Lắk</div>
                                                <div class="grid-item" data-value="DAKNONG" onclick="selectValue(this)">Đắk Nông</div>
                                                <div class="grid-item" data-value="DIENBIEN" onclick="selectValue(this)">Điện Biên</div>
                                                <div class="grid-item" data-value="DONGNAI" onclick="selectValue(this)">Đồng Nai</div>
                                                <div class="grid-item" data-value="DONGTHAP" onclick="selectValue(this)">Đồng Tháp</div>
                                                <div class="grid-item" data-value="GIALAI" onclick="selectValue(this)">Gia Lai</div>
                                                <div class="grid-item" data-value="HAGIANG" onclick="selectValue(this)">Hà Giang</div>
                                                <div class="grid-item" data-value="HANAM" onclick="selectValue(this)">Hà Nam</div>
                                                <div class="grid-item" data-value="HANOI" onclick="selectValue(this)">Hà Nội</div>
                                                <div class="grid-item" data-value="HATINH" onclick="selectValue(this)">Hà Tĩnh</div>
                                                <div class="grid-item" data-value="HAIDUONG" onclick="selectValue(this)">Hải Dương</div>
                                                <div class="grid-item" data-value="HAIPHONG" onclick="selectValue(this)">Hải Phòng</div>
                                                <div class="grid-item" data-value="HAUGIANG" onclick="selectValue(this)">Hậu Giang</div>
                                                <div class="grid-item" data-value="HOABINH" onclick="selectValue(this)">Hòa Bình</div>
                                                <div class="grid-item" data-value="HUNGYEN" onclick="selectValue(this)">Hưng Yên</div>
                                                <div class="grid-item" data-value="KHANHHOA" onclick="selectValue(this)">Khánh Hòa</div>
                                                <div class="grid-item" data-value="KIENGIANG" onclick="selectValue(this)">Kiên Giang</div>
                                                <div class="grid-item" data-value="KONTUM" onclick="selectValue(this)">Kon Tum</div>
                                                <div class="grid-item" data-value="LAICHAU" onclick="selectValue(this)">Lai Châu</div>
                                                <div class="grid-item" data-value="LAMDONG" onclick="selectValue(this)">Lâm Đồng</div>
                                                <div class="grid-item" data-value="LANGSON" onclick="selectValue(this)">Lạng Sơn</div>
                                                <div class="grid-item" data-value="LAOCAI" onclick="selectValue(this)">Lào Cai</div>
                                                <div class="grid-item" data-value="LONGAN" onclick="selectValue(this)">Long An</div>
                                                <div class="grid-item" data-value="NAMDINH" onclick="selectValue(this)">Nam Định</div>
                                                <div class="grid-item" data-value="NGHEAN" onclick="selectValue(this)">Nghệ An</div>
                                                <div class="grid-item" data-value="NINHBINH" onclick="selectValue(this)">Ninh Bình</div>
                                                <div class="grid-item" data-value="NINHTHUAN" onclick="selectValue(this)">Ninh Thuận</div>
                                                <div class="grid-item" data-value="PHUTHO" onclick="selectValue(this)">Phú Thọ</div>
                                                <div class="grid-item" data-value="PHUYEN" onclick="selectValue(this)">Phú Yên</div>
                                                <div class="grid-item" data-value="QUANGBINH" onclick="selectValue(this)">Quảng Bình</div>
                                                <div class="grid-item" data-value="QUANGNAM" onclick="selectValue(this)">Quảng Nam</div>
                                                <div class="grid-item" data-value="QUANGNGAI" onclick="selectValue(this)">Quảng Ngãi</div>
                                                <div class="grid-item" data-value="QUANGNINH" onclick="selectValue(this)">Quảng Ninh</div>
                                                <div class="grid-item" data-value="QUANGTRI" onclick="selectValue(this)">Quảng Trị</div>
                                                <div class="grid-item" data-value="SOCTRANG" onclick="selectValue(this)">Sóc Trăng</div>
                                                <div class="grid-item" data-value="SONLA" onclick="selectValue(this)">Sơn La</div>
                                                <div class="grid-item" data-value="TAYNINH" onclick="selectValue(this)">Tây Ninh</div>
                                                <div class="grid-item" data-value="THAIBINH" onclick="selectValue(this)">Thái Bình</div>
                                                <div class="grid-item" data-value="THAINGUYEN" onclick="selectValue(this)">Thái Nguyên</div>
                                                <div class="grid-item" data-value="THANHHOA" onclick="selectValue(this)">Thanh Hóa</div>
                                                <div class="grid-item" data-value="THUATHIENHUE" onclick="selectValue(this)">Thừa Thiên Huế</div>
                                                <div class="grid-item" data-value="TIENGIANG" onclick="selectValue(this)">Tiền Giang</div>
                                                <div class="grid-item" data-value="HCMC" onclick="selectValue(this)">TP Hồ Chí Minh</div>
                                                <div class="grid-item" data-value="TRAVINH" onclick="selectValue(this)">Trà Vinh</div>
                                                <div class="grid-item" data-value="TUYENQUANG" onclick="selectValue(this)">Tuyên Quang</div>
                                                <div class="grid-item" data-value="VINHLONG" onclick="selectValue(this)">Vĩnh Long</div>
                                                <div class="grid-item" data-value="VINHPHUC" onclick="selectValue(this)">Vĩnh Phúc</div>
                                                <div class="grid-item" data-value="YENBAI" onclick="selectValue(this)">Yên Bái</div>
                                            </div>

                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="kinds_">
                                <div class="kinds">
                                    <div class="kind kind_1">
                                        <div class="kind_show">
                                            <div class="_kind_show">
                                                <span id="post_value_1" class="kind_text">Loại nhà đất</span>
                                                <i class="kind_right fas fa-angle-down"></i>
                                            </div>
                                            <div class="kind_mini hidden kind_mini_1">
                                                <div class="kind_mini_top">
                                                    <div class="_kind_mini_top">
                                                        <div class="kind_mini_text kind_space_1">
                                                            <span class="_kind_mini_text">Loại nhà đất</span>
                                                        </div>
                                                        <svg class="close_kind_mini bi bi-x-lg" xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" viewBox="0 0 16 16">
                                                            <path d="M2.146 2.854a.5.5 0 1 1 .708-.708L8 7.293l5.146-5.147a.5.5 0 0 1 .708.708L8.707 8l5.147 5.146a.5.5 0 0 1-.708.708L8 8.707l-5.146 5.147a.5.5 0 0 1-.708-.708L7.293 8z"/>
                                                        </svg>
                                                    </div>
                                                    <div class="line_mini_top"></div>
                                                </div>
                                                <ul class="ul_mini_content">
                                                    <li class="li_mini_content">
                                                        <label for="home_left_1" class="kind_mini_text_1">Tất cả nhà</label>
                                                        <input class="check_true checkbox_left_1" type="checkbox" id="home_left_1" name="home_home" value="home_all_home">
                                                    </li>
                                                    <li class="li_mini_content">
                                                        <label for="home_left_2" class="kind_mini_text_2">Nhà đất bán</label>
                                                        <input class="check_true checkbox_left_2" type="checkbox" id="home_left_2" name="home_home" value="SALE">
                                                    </li>
                                                    <li class="li_mini_content">
                                                        <label for="home_left_3" class="kind_mini_text_3">Nhà đất cho thuê</label>
                                                        <input class="check_true checkbox_left_3" type="checkbox" id="home_left_3" name="home_home" value="RENT">
                                                    </li>
                                                </ul>
                                                <div class="line_mini_bottom"></div>
                                                <div class="kind_mini_bottom">
                                                    <button id="home_mini_bottom_left" type="button" class="mini_bottom_left">Đặt lại</button>
                                                    <button class="mini_bottom_right" id="home_mini_bottom_right" type="button">Áp dụng</button>
                                                </div>
                                            </div>
                                        </div>

                                    </div>
                                    <div class="kind kind_2">
                                        <div class="kind_show">
                                            <div class="_kind_show">
                                                <span id="post_value_2" class="kind_text">Mức giá</span>
                                                <i class="kind_right fas fa-angle-down"></i>
                                            </div>
                                            <div class="kind_mini hidden kind_mini_2">
                                                <div class="kind_mini_top">
                                                    <div class="_kind_mini_top">
                                                        <div class="kind_mini_text kind_space_2">
                                                            <span class="_kind_mini_text">Mức giá</span>
                                                        </div>
                                                        <svg class="close_kind_mini bi bi-x-lg" xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" viewBox="0 0 16 16">
                                                            <path d="M2.146 2.854a.5.5 0 1 1 .708-.708L8 7.293l5.146-5.147a.5.5 0 0 1 .708.708L8.707 8l5.147 5.146a.5.5 0 0 1-.708.708L8 8.707l-5.146 5.147a.5.5 0 0 1-.708-.708L7.293 8z"/>
                                                        </svg>
                                                    </div>
                                                    <div class="line_mini_top"></div>
                                                </div>
                                                <ul class="ul_mini_content">
                                                    <li class="li_mini_content">
                                                        <label for="gia_left_1" class="kind_mini_text_1">Tất cả giá</label>
                                                        <input class="check_true radio_center_1" type="radio" id="gia_left_1" name="gia_price" value="gia_all_prices">
                                                    </li>
                                                    <li class="li_mini_content">
                                                        <label for="gia_left_2" class="kind_mini_text_2">Dưới 100 triệu</label>
                                                        <input class="check_true radio_center_2" type="radio" id="gia_left_2" name="gia_price" value="gia_under_100_million">
                                                    </li>
                                                    <li class="li_mini_content">
                                                        <label for="gia_left_3" class="kind_mini_text_3">Trên 100 triệu</label>
                                                        <input class="check_true radio_center_3" type="radio" id="gia_left_3" name="gia_price" value="gia_over_100_million">
                                                    </li>
                                                </ul>
                                                <div class="line_mini_bottom"></div>
                                                <div class="kind_mini_bottom">
                                                    <button id="gia_mini_bottom_left" type="button" class="mini_bottom_left">Đặt lại</button>
                                                    <button class="mini_bottom_right" id="gia_mini_bottom_right" type="button">Áp dụng</button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="kind kind_3">
                                        <div class="kind_show">
                                            <div class="_kind_show">
                                                <span id="post_value_3" class="kind_text">Diện tích</span>
                                                <i class="kind_right fas fa-angle-down"></i>
                                            </div>
                                            <div class="kind_mini hidden kind_mini_3">
                                                <div class="kind_mini_top">
                                                    <div class="_kind_mini_top">
                                                        <div class="kind_mini_text kind_space_3">
                                                            <span class="_kind_mini_text">Diện tích</span>
                                                        </div>
                                                        <svg class="close_kind_mini bi bi-x-lg" xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" viewBox="0 0 16 16">
                                                            <path d="M2.146 2.854a.5.5 0 1 1 .708-.708L8 7.293l5.146-5.147a.5.5 0 0 1 .708.708L8.707 8l5.147 5.146a.5.5 0 0 1-.708.708L8 8.707l-5.146 5.147a.5.5 0 0 1-.708-.708L7.293 8z"/>
                                                        </svg>
                                                    </div>
                                                    <div class="line_mini_top"></div>
                                                </div>
                                                <ul class="ul_mini_content">
                                                    <li class="li_mini_content">
                                                        <label for="dien_tich_right_1" class="kind_mini_text_1">Tất cả diện tích</label>
                                                        <input class="check_true radio_right_1" type="radio" id="dien_tich_right_1" name="dien_tich_acreage" value="dien_tich_all_acreage">
                                                    </li>
                                                    <li class="li_mini_content">
                                                        <label for="dien_tich_right_2" class="kind_mini_text_2">Nhỏ hơn 100 m²</label>
                                                        <input class="check_true radio_right_2" type="radio" id="dien_tich_right_2" name="dien_tich_acreage" value="dien_tich_under_100m">
                                                    </li>
                                                    <li class="li_mini_content">
                                                        <label for="dien_tich_right_3" class="kind_mini_text_3">Lớn hơn 100 m²</label>
                                                        <input class="check_true radio_right_3" type="radio" id="dien_tich_right_3" name="dien_tich_acreage" value="dien_tich_over_100m">
                                                    </li>
                                                </ul>
                                                <div class="line_mini_bottom"></div>
                                                <div class="kind_mini_bottom">
                                                    <button id="dien_tich_mini_bottom_left" type="button" class="mini_bottom_left">Đặt lại</button>
                                                    <button class="mini_bottom_right" id="dien_tich_mini_bottom_right" type="button">Áp dụng</button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>

            </div>
            <!-- End Search -->

            <!-- Featured Properties -->
            <!-- Chỉ hiển thị cả section nếu có properties hoặc có message -->
            <div class="bds_for_you" th:if="${properties != null && (!properties.isEmpty() || message != null)}">
                <div class="bds_for_you_container container">
                    <h3>Bất động sản dành cho bạn</h3>

                    <!-- Hiển thị message nếu có -->
                    <p th:if="${message}" th:text="${message}"></p>

                    <!-- Hiển thị danh sách properties nếu có -->
                    <div class="products_container" th:if="${!properties.isEmpty()}">
                        <div class="product_item item" th:each="property : ${properties}">
                            <img class="product_item_image"
                                 th:if="${not #lists.isEmpty(property.images)}"
                                 th:src="@{${property.images[0].webPath}(v=${#dates.createNow().time})}"
                                 th:alt="${property.title}"
                                 style="width: 300px; height: 200px; object-fit: cover;">

                            <!-- Ảnh mặc định -->
                            <img class="product_item_image"
                                 th:unless="${not #lists.isEmpty(property.images)}"
                                 th:src="@{/web/assets/img/test1.jpg}"
                                 th:alt="${property.title}"
                                 style="width: 300px; height: 200px; object-fit: cover;">

                            <div class="product_item_info">
                                <a class="product_item_title" th:text="${property.title}">Bán nhà Hà Nội</a>
                                <div class="price_area">
                        <span class="price">
                            <i class="fa-solid fa-money-bill"></i>
                            <span th:text="${property.price}">3,9 tỷ</span>
                        </span>
                                    <span class="area">
                            <i class="fa-solid fa-ruler"></i>
                            <span th:text="${property.area}">80 m²</span>
                        </span>
                                </div>
                                <span class="location">
                        <i class="fa-solid fa-location-dot"></i>
                        <span th:text="${property.address}">Cầu Giấy, Hà Nội</span>
                    </span>
                            </div>
                        </div>
                    </div>

                    <!-- Nút mở rộng chỉ hiển thị khi có properties -->
                    <div class="view_more text-center" th:if="${!properties.isEmpty()}">
                        <button class="btn">Mở rộng</button>
                    </div>
                </div>
            </div>


            <div class="bds_high_rating">
                <div class="bds_high_rating_container container">
                    <h3>Bất động sản nổi trội</h3>
                    <span class="see_more"><a href="#">Xem thêm</a><i class="fa-solid fa-arrow-right"></i></span>
                    <div class="high_rating_owl owl-carousel owl-theme" th:if="${!latestProperties.isEmpty()}">
                        <div class="product_item item" th:each="property : ${latestProperties}">
                            <img class="product_item_image" th:src="@{/web/assets/img/test1.jpg}" alt="Ảnh nhà đất">
                            <div class="product_item_info">
                                <a class="product_item_title" th:text="${property.title}">Bán nhà Hà Nội</a>
                                <div class="price_area">
										<span class="price">
											<i class="fa-solid fa-money-bill"></i>
											<span th:text="${property.price}">3,9 tỷ</span>
										</span>
                                    <span class="area">
											<i class="fa-solid fa-ruler"></i>
											<span th:text="${property.area}">80 m²</span>
										</span>
                                </div>
                                <span class="location">
										<i class="fa-solid fa-location-dot"></i>
										<span th:text="${property.address}">Cầu Giấy, Hà Nội</span>
									</span>
                            </div>
                        </div>

                    </div>

                </div>
            </div>

            <div class="hot_news">
                <div class="hot_news_container container">
                    <h3>Tin bất động sản</h3>
                    <span class="see_more"><a href="#">Xem thêm</a><i class="fa-solid fa-arrow-right"></i></span>
                    <div class="row">
                        <div class="hot_new_left col-lg-6">
                            <div class="post">
                                <div class="image">
                                    <a><img th:src="@{/web/assets/img/test1.jpg}"></a>
                                </div>
                                <h5><a th:text="${latestProperties[1].title}">Mẫu nhà ống 2 tầng kết nối nắng và gió</a></h5>
                                <p th:text="${latestProperties[1].description}">Mẫu nhà ống 2 tầng kết nối nắng và gió toạ lạc tại Cẩm Lệ, Đà Nẵng dưới đây chắc chắn sẽ làm bạn yêu thích. Đặc biệt hơn, chi phí hoàn...</p>
                            </div>
                        </div>
                        <div class="hot_new_right col-lg-6" th:if="${!latestProperties.isEmpty()}">
                            <div class="float_post" th:each="property,iterStat : ${latestProperties}" th:if="${iterStat.index < 5}">
                                <div class="image"><a><img th:src="@{/web/assets/img/test1.jpg}"></a></div>
                                <div>
                                    <h6><a th:text="${property.title}">Mẫu nhà ống 2 tầng kết nối nắng và gió</a></h6>
                                    <p th:text="${property.description}">Mẫu nhà ống 2 tầng kết nối nắng và gió tọa lạc tại...</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script>

        // Hàm xử lý khi chọn tỉnh/thành phố
        function selectValue(element) {
            const selectedValue = element.getAttribute('data-value');
            document.getElementById('true_province_').value = selectedValue;
            document.getElementById('city').value = selectedValue;
            console.log("Đã chọn tỉnh/thành phố:", selectedValue);

            // Đóng menu sau khi chọn (nếu cần)
            const menu = document.getElementById('menu');
            if (menu.classList.contains('active')) {
                menu.classList.remove('active');
            }
        }
    </script>
    <script>
        // Xử lý chọn loại nhà đất
        document.getElementById('home_mini_bottom_right').onclick = function() {
            const selected = document.querySelector('input[name="home_home"]:checked');
            document.getElementById('propertyType').value = selected ? selected.value : '';
            document.getElementById('post_value_1').textContent = selected ? selected.parentElement.querySelector('label').textContent : 'Loại nhà đất';
            document.querySelector('.kind_mini_1').classList.add('hidden');
        }

        document.getElementById('home_mini_bottom_left').onclick = function() {
            document.querySelector('input[name="home_home"][value=""]').checked = true;
            document.getElementById('propertyType').value = '';
            document.getElementById('post_value_1').textContent = 'Loại nhà đất';
        }

        // Xử lý chọn giá
        document.getElementById('gia_mini_bottom_right').onclick = function() {
            const selected = document.querySelector('input[name="gia_price"]:checked');
            if (selected) {
                switch(selected.value) {
                    case 'gia_under_100_million':
                        document.getElementById('maxPrice').value = '100';
                        document.getElementById('minPrice').value = '';
                        break;
                    case 'gia_over_100_million':
                        document.getElementById('minPrice').value = '100';
                        document.getElementById('maxPrice').value = '';
                        break;
                }
            }
        }

        // Xử lý chọn diện tích
        document.getElementById('dien_tich_mini_bottom_right').onclick = function() {
            const selected = document.querySelector('input[name="dien_tich_acreage"]:checked');
            if (selected) {
                switch(selected.value) {
                    case 'dien_tich_under_100m':
                        document.getElementById('maxArea').value = '100';
                        document.getElementById('minArea').value = '';
                        break;
                    case 'dien_tich_over_100m':
                        document.getElementById('minArea').value = '100';
                        document.getElementById('maxArea').value = '';
                        break;
                }
            }
        }

        // Các nút reset
        document.getElementById('home_mini_bottom_left').onclick = function() {
            document.querySelectorAll('input[name="home_home"]').forEach(cb => cb.checked = false);
            document.getElementById('propertyType').value = '';
        }

        document.getElementById('gia_mini_bottom_left').onclick = function() {
            document.querySelectorAll('input[name="gia_price"]').forEach(rb => rb.checked = false);
            document.getElementById('minPrice').value = '';
            document.getElementById('maxPrice').value = '';
        }

        document.getElementById('dien_tich_mini_bottom_left').onclick = function() {
            document.querySelectorAll('input[name="dien_tich_acreage"]').forEach(rb => rb.checked = false);
            document.getElementById('minArea').value = '';
            document.getElementById('maxArea').value = '';
        }
    </script>
</main>
<th:block layout:fragment="script">
   <script>
       document.addEventListener('DOMContentLoaded', function() {
           // Xử lý click vào "Loại nhà đất"
           document.querySelector('.kind_1').addEventListener('click', function() {
               document.querySelector('.kind_mini_1').classList.remove('hidden');
           });

           // Đóng dropdown khi click nút close
           document.querySelectorAll('.close_kind_mini').forEach(btn => {
               btn.addEventListener('click', function() {
                   this.closest('.kind_mini').classList.add('hidden');
               });
           });

           // Xử lý nút Áp dụng
           document.getElementById('home_mini_bottom_right').onclick = function() {
               const selected = document.querySelector('input[name="home_home"]:checked');
               if (selected) {
                   document.getElementById('propertyType').value = selected.value;
                   document.getElementById('post_value_1').textContent = selected.parentElement.querySelector('label').textContent;
               }
               document.querySelector('.kind_mini_1').classList.add('hidden');
           };

           // Thêm xử lý khi không tìm thấy kết quả
           document.querySelector('form').addEventListener('submit', function(e) {
               const city = document.getElementById('city').value;
               if (!city) {
                   e.preventDefault();
                   alert('Vui lòng chọn tỉnh thành');
               }
           });
       });
   </script>

</th:block>
</body>
</html>
