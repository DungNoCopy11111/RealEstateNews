<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">

<head>
    <!-- Meta Tags -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="keywords" content="Site keywords here">
    <meta name="description" content="">
    <meta name='copyright' content=''>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Title -->
    <title>RealEstate</title>

    <!-- External CSS -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css" rel="stylesheet">
    <link href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/themify-icons@0.1.2/css/themify-icons.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Poppins:200i,300,400,500,600,700,800,900&display=swap" rel="stylesheet">
    <link href="https://unicons.iconscout.com/release/v4.0.0/css/line.css" rel="stylesheet">
    <link href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" rel="stylesheet">

    <!-- Local CSS -->
    <link rel="stylesheet" th:href="@{/web/assets/css/bootstrap.min.css}">
    <link rel="stylesheet" th:href="@{/web/assets/css/nice-select.css}">
    <link rel="stylesheet" th:href="@{/web/assets/css/font-awesome.min.css}">
    <link rel="stylesheet" th:href="@{/web/assets/css/icofont.css}">
    <link rel="stylesheet" th:href="@{/web/assets/css/slicknav.min.css}">
    <link rel="stylesheet" th:href="@{/web/assets/css/owl-carousel.css}">
    <link rel="stylesheet" th:href="@{/web/assets/css/datepicker.css}">
    <link rel="stylesheet" th:href="@{/web/assets/css/animate.min.css}">
    <link rel="stylesheet" th:href="@{/web/assets/css/magnific-popup.css}">
    <link rel="stylesheet" th:href="@{/web/assets/owlcarousel/owl.carousel.min.css}">
    <link rel="stylesheet" th:href="@{/web/assets/owlcarousel/owl.theme.default.min.css}">
    <link rel="stylesheet" th:href="@{/web/assets/css/normalize.css}">
    <link rel="stylesheet" th:href="@{/web/style.css}">
    <link rel="stylesheet" th:href="@{/web/assets/css/responsive.css}">
    <link rel="stylesheet" th:href="@{/web/assets/css/main_content.css}">
    <link rel="stylesheet" th:href="@{/web/assets/css/search_bar.css}">
    <link rel="stylesheet" th:href="@{/web/assets/css/nha_dat_ban.css}">
    <link rel="stylesheet" th:href="@{/web/assets/css/nha_dat_thue.css}">
    <link rel="stylesheet" th:href="@{/web/assets/css/post.css}">

    <!-- Favicon -->
    <link rel="icon" th:href="@{/web/assets/img/favicon.png}">



</head>

<body>
<!-- Header -->
<header>
    <div th:replace="~{web/fragments/header::header}"></div>
</header>

<!-- Main Content -->
<div layout:fragment="contentA"></div>
<footer>
    <div th:replace="~{web/fragments/footer::footer}"></div>
</footer>


<!-- Footer -->

<!-- External JS -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/2.11.8/umd/popper.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.2/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/waypoints/2.0.3/waypoints.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-nice-select/1.1.0/js/jquery.nice-select.min.js"></script>

<!-- Local JS -->
<script th:src="@{/web/assets/js/jquery-ui.min.js}"></script>
<script th:src="@{/web/assets/js/bootstrap-datepicker.js}"></script>
<script th:src="@{/web/assets/js/jquery.nav.js}"></script>
<script th:src="@{/web/assets/js/slicknav.min.js}"></script>
<script th:src="@{/web/assets/js/jquery.scrollUp.min.js}"></script>
<script th:src="@{/web/assets/js/niceselect.js}"></script>
<script th:src="@{/web/assets/js/easing.js}"></script>
<script th:src="@{/web/assets/js/tilt.jquery.min.js}"></script>
<script th:src="@{/web/assets/js/wow.min.js}"></script>
<script th:src="@{/web/assets/js/owl-carousel.js}"></script>
<script th:src="@{/web/assets/js/jquery.magnific-popup.min.js}"></script>
<script th:src="@{/web/assets/js/jquery.counterup.min.js}"></script>
<script th:src="@{/web/assets/js/steller.js}"></script>
<script th:src="@{/web/assets/js/colors.js}"></script>
<script th:src="@{/web/assets/js/main.js}"></script>
<script th:src="@{/web/assets/js/main_content.js}"></script>
<script type="text/javascript" th:src="@{/web/assets/js/post.js}"></script>
<script type="text/javascript" th:src="@{/web/assets/js/nha_dat_ban.js}"></script>
<script type="text/javascript" th:src="@{/web/assets/js/nha_dat_thue.js}"></script>
<script type="text/javascript" th:src="@{/web/assets/js/menu.js}"></script>


<script th:inline="javascript">
    document.addEventListener('DOMContentLoaded', function() {
        // Đảm bảo jQuery đã được load
        if (typeof jQuery !== 'undefined') {
            try {
                // Xử lý hình ảnh
                const images = document.querySelectorAll('.product_item_image');
                if (images.length > 0) {
                    images.forEach(function(img) {
                        if (img) {
                            img.onerror = function() {
                                this.src = '[[@{/web/assets/img/test1.jpg}]]';
                            }
                            const src = img.getAttribute('src');
                            if(src) {
                                img.setAttribute('src', src + '?t=' + new Date().getTime());
                            }
                        }
                    });
                }

                // Khởi tạo plugins
                if($.fn.niceSelect) {
                    $('select').niceSelect();
                }

                if($.fn.owlCarousel && $('.owl-carousel').length > 0) {
                    $(".owl-carousel").owlCarousel({
                        items: 1,
                        loop: true,
                        margin: 10,
                        nav: true,
                        responsive: {
                            0: { items: 1 },
                            600: { items: 2 },
                            1000: { items: 3 }
                        }
                    });
                }
            } catch(error) {
                console.error('Error in DOMContentLoaded:', error);
            }
        }
    });

    // Thêm event listener cho window load
    window.addEventListener('load', function() {
        // Đảm bảo footer luôn ở dưới cùng
        function adjustFooter() {
            const wrapper = document.getElementById('wrapper');
            const footer = document.querySelector('footer');
            if (wrapper && footer) {
                const windowHeight = window.innerHeight;
                const footerHeight = footer.offsetHeight;
                wrapper.style.minHeight = (windowHeight - footerHeight) + 'px';
            }
        }

        adjustFooter();
        window.addEventListener('resize', adjustFooter);
    });
</script>
<!-- Script để xử lý ảnh -->
<script th:inline="javascript">
    console.log('nha_dat_ban.js loaded');
    document.addEventListener('DOMContentLoaded', function() {
        try {
            const images = document.querySelectorAll('.product_item_image');
            images.forEach(function(img) {
                // Xử lý lỗi ảnh
                img.onerror = function() {
                    this.src = '[[@{/web/assets/img/test1.jpg}]]';
                }

                // Thêm timestamp để tránh cache
                const src = img.getAttribute('src');
                if(src) {
                    img.setAttribute('src', src + '?t=' + new Date().getTime());
                }
            });

            // Khởi tạo các plugin
            if($.fn.niceSelect) {
                $('select').niceSelect();
            }

            if($.fn.owlCarousel) {
                $(".owl-carousel").owlCarousel({
                    items: 1,
                    loop: true,
                    margin: 10,
                    nav: true,
                    responsive: {
                        0: { items: 1 },
                        600: { items: 2 },
                        1000: { items: 3 }
                    }
                });
            }
        } catch(error) {
            console.error('Error initializing components:', error);
        }
    });
</script>


<!-- Page-Specific Scripts -->
<th:block layout:fragment="script"></th:block>

</body>
</html>